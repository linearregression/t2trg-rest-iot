<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RESTful Design for Internet of Things Systems</title>

<style type="text/css">/*<![CDATA[*/
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

@media screen and (min-width: 1024px) {
  ul.toc, #rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    padding: 0 1em;
    z-index: 1;
  }
  #rfc\.toc {
    top: 16px;
  }
  ul.toc {
    top: 80px;
    overflow: auto;
  }

  body {
    padding-left: 1.5em;
    padding-right: 29em;
  }
}

body {
  font: 15px "Helvetica Neue",Helvetica,Arial,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 130%;
  margin: 2.5em auto;
  max-width: 724px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size-adjust: 0.5;
  font-weight: 500;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title { font-size: 36px; }
h1 { font-size: 30px; }
h2 { font-size: 24px; }
h3, h4 { font-size: 18px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

ul.toc li {
  list-style: none;
  text-indent: -2.5em;
  padding-left: 2.5em;
  padding-bottom: 5px;
  margin: 0;
}
ul.toc, ul.toc ul {
  margin: 0 0 0 1.5em;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header {
  width: 100%;
}
table.header td {
  border: none;
  background-color: transparent;
  color: black;
}
.filename {
  color: rgb(119, 119, 119);
  font-size: 23px;
  font-weight: normal;
  height: auto;
  line-height: 100%;
}
#rfc\.abstract+p {
  font-size: 20px;
  font-weight: 300;
  line-height: 130%;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure {
  font-style: italic;
  margin: 0 1.5em;
}

address {
  margin: 10px 0 0;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn {
  font-weight: bold;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
/*]]>*/</style>

  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction"/>
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology"/>
<link href="#rfc.section.3" rel="Chapter" title="3 Basics"/>
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Architecture"/>
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 System design"/>
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Resource modeling"/>
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Uniform Resource Identifiers (URIs)"/>
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 HTTP/CoAP Methods"/>
<link href="#rfc.section.3.5.1" rel="Chapter" title="3.5.1 GET"/>
<link href="#rfc.section.3.5.2" rel="Chapter" title="3.5.2 POST"/>
<link href="#rfc.section.3.5.3" rel="Chapter" title="3.5.3 PUT"/>
<link href="#rfc.section.3.5.4" rel="Chapter" title="3.5.4 DELETE"/>
<link href="#rfc.section.3.6" rel="Chapter" title="3.6 HTTP/CoAP Status/Response Codes"/>
<link href="#rfc.section.4" rel="Chapter" title="4 Security Considerations"/>
<link href="#rfc.section.5" rel="Chapter" title="5 Acknowledgement"/>
<link href="#rfc.references" rel="Chapter" title="6 References"/>
<link href="#rfc.references.1" rel="Chapter" title="6.1 Normative References"/>
<link href="#rfc.references.2" rel="Chapter" title="6.2 Informative References"/>
<link href="#rfc.appendix.A" rel="Chapter" title="A Future Work"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.4.10 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Keranen, A., Kovatsch, M., and K. Hartke" />
  <meta name="dct.identifier" content="urn:ietf:id:draft-keranen-t2trg-rest-iot-latest" />
  <meta name="dct.issued" scheme="ISO8601" content="2016-11-15" />
  <meta name="dct.abstract" content="This document gives guidance for designing Internet of Things (IoT) systems that follow the principles of the Representational State Transfer (REST) architectural style." />
  <meta name="description" content="This document gives guidance for designing Internet of Things (IoT) systems that follow the principles of the Representational State Transfer (REST) architectural style." />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">Network Working Group</td>
  <td class="right">A. Keranen</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">Ericsson</td>
</tr>
<tr>
  <td class="left">Intended status: Informational</td>
  <td class="right">M. Kovatsch</td>
</tr>
<tr>
  <td class="left">Expires: May 19, 2017</td>
  <td class="right">ETH Zurich</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">K. Hartke</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">Universitaet Bremen TZI</td>
</tr>
<tr>
  <td class="left"></td>
  <td class="right">November 15, 2016</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RESTful Design for Internet of Things Systems<br />
  <span class="filename">draft-keranen-t2trg-rest-iot-latest</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>This document gives guidance for designing Internet of Things (IoT) systems that follow the principles of the Representational State Transfer (REST) architectural style.</p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 19, 2017.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2016 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a></li>
<li>2.   <a href="#rfc.section.2">Terminology</a></li>
<li>3.   <a href="#rfc.section.3">Basics</a></li>
<ul><li>3.1.   <a href="#rfc.section.3.1">Architecture</a></li>
<li>3.2.   <a href="#rfc.section.3.2">System design</a></li>
<li>3.3.   <a href="#rfc.section.3.3">Resource modeling</a></li>
<li>3.4.   <a href="#rfc.section.3.4">Uniform Resource Identifiers (URIs)</a></li>
<li>3.5.   <a href="#rfc.section.3.5">HTTP/CoAP Methods</a></li>
<ul><li>3.5.1.   <a href="#rfc.section.3.5.1">GET</a></li>
<li>3.5.2.   <a href="#rfc.section.3.5.2">POST</a></li>
<li>3.5.3.   <a href="#rfc.section.3.5.3">PUT</a></li>
<li>3.5.4.   <a href="#rfc.section.3.5.4">DELETE</a></li>
</ul><li>3.6.   <a href="#rfc.section.3.6">HTTP/CoAP Status/Response Codes</a></li>
</ul><li>4.   <a href="#rfc.section.4">Security Considerations</a></li>
<li>5.   <a href="#rfc.section.5">Acknowledgement</a></li>
<li>6.   <a href="#rfc.references">References</a></li>
<ul><li>6.1.   <a href="#rfc.references.1">Normative References</a></li>
<li>6.2.   <a href="#rfc.references.2">Informative References</a></li>
</ul><li>Appendix A.   <a href="#rfc.appendix.A">Future Work</a></li>
<li><a href="#rfc.authors">Authors' Addresses</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a></h1>
<p id="rfc.section.1.p.1">The Representational State Transfer (REST) architectural style <a href="#REST">[REST]</a> is a set of guidelines and best practices for building distributed hypermedia systems.</p>
<p id="rfc.section.1.p.2">When REST principles are applied to the design of a system, the result is often called RESTful and in particular an API following these principles is called a RESTful API.</p>
<p id="rfc.section.1.p.3">Different protocols can be used with RESTful systems, but at the time of writing the most common protocols are HTTP <a href="#RFC7230">[RFC7230]</a> and CoAP <a href="#RFC7252">[RFC7252]</a>.</p>
<p id="rfc.section.1.p.4">RESTful design facilitates many desirable features for a system, such as good scaling properties. RESTful APIs are also often simple and lightweight and hence easy to use also with various IoT applications. The goal of this document is to give basic guidance for designing RESTful systems and APIs for IoT applications and give pointers for more information.</p>
<p id="rfc.section.1.p.5">Design of a good RESTful IoT system has naturally many commonalities with other Web systems. Compared to other systems, the key characteristics of many IoT systems include:</p>
<p/>

<ul>
  <li>data formats, interaction patterns, and other mechanisms that minimize, or preferably avoid, the need for human interaction</li>
  <li>preference for compact and simple data formats to facilitate efficient transfer over (often) constrained networks and lightweight processing in constrained nodes</li>
</ul>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#sec-terms" id="sec-terms">Terminology</a></h1>
<p id="rfc.section.2.p.1">This section explains some of the common terminology that is used in the context of RESTful design for IoT systems. For terminology of constrained nodes and networks, see <a href="#RFC7228">[RFC7228]</a>.</p>
<p/>

<dl>
  <dt>Application State:</dt>
  <dd style="margin-left: 8">The state kept by a client between requests. This typically includes the &#8220;current&#8221; resource, the set of active requests, the history of requests, bookmarks (URIs stored for later retrieval) and application-specific state.</dd>
  <dt>Cache:</dt>
  <dd style="margin-left: 8">A local store of response messages and the subsystem that controls storage, retrieval, and deletion of messages in it.</dd>
  <dt>Client:</dt>
  <dd style="margin-left: 8">A node that sends requests to servers and receives responses.</dd>
  <dt>Content Negotiation:</dt>
  <dd style="margin-left: 8">The practice of determining the &#8220;best&#8221; representation for a client when examining the current state of a resource. The most common forms of content negotiation are Proactive Content Negotiation and Reactive Content Negotiation.</dd>
  <dt>Form:</dt>
  <dd style="margin-left: 8">A hypermedia control that enables a client to change the state of a resource.</dd>
  <dt>Forward Proxy:</dt>
  <dd style="margin-left: 8">An intermediary that is selected by a client, usually via local configuration rules, and that can be tasked to make requests on behalf of the client. This may be useful, for example, when the client lacks the capability to make the request itself or to service the response from a cache in order to reduce response time, network bandwidth and energy consumption.</dd>
  <dt>Gateway:</dt>
  <dd style="margin-left: 8">See &#8220;Reverse Proxy&#8221;.</dd>
  <dt>Hypermedia Control:</dt>
  <dd style="margin-left: 8">A component embedded in a representation that identifies a resource for future hypermedia interactions, such as a link or a form. If the client engages in an interaction with the identified resource, the result may be a change resource state and/or application state.</dd>
  <dt>Idempotent Method:</dt>
  <dd style="margin-left: 8">A method where multiple identical requests with that method lead to the same visible resource state as a single such request. For example, the PUT method replaces the state of a resource with a new state; replacing the state multiple times with the same new state still results in the same state for the resource. However, the response from the server can be different when the same idenpotent method is used multiple times. For example when DELETE is used twice on an existing resource, the first request would remove the association and return success acknowledgement whereas the second request would likely result in error response due to non-existing resource.  </dd>
  <dt>Link:</dt>
  <dd style="margin-left: 8">A hypermedia control that enables a client to navigate between resources and thereby change the application state.</dd>
  <dt>Media Type:</dt>
  <dd style="margin-left: 8">A string such as &#8220;text/html&#8221; or &#8220;application/json&#8221; that is used to label representations so that it is known how the representation should be interpreted and how it is encoded.</dd>
  <dt>Method:</dt>
  <dd style="margin-left: 8">An operation associated with a resource. Common methods include GET, PUT, POST, and DELETE (see <a href="#sec-methods">Section 3.5</a> for details).</dd>
  <dt>Origin Server:</dt>
  <dd style="margin-left: 8">A server that is the definitive source for representations of its resources and the ultimate recipient of any request that intends to modify its resources. In contrast, intermediaries (such as proxies caching a representation) can assume the role of a server, but are not the source for representations as these are acquired from the origin server.</dd>
  <dt>Proactive Content Negotiation:</dt>
  <dd style="margin-left: 8">A content negotiation mechanism where the server selects a representation based on the expressed preference of the client. For example, in an IoT application, a client could send a request with preferred media type &#8220;application/senml+json&#8221;.</dd>
  <dt>Reactive Content Negotiation:</dt>
  <dd style="margin-left: 8">A content negotiation mechanism where the client selects a representation from a list of available representations. The list may, for example, be included by a server in an initial response. If the user agent is not satisfied by the initial response representation, it can request one or more of the alternative representations, selected based on metadata (e.g., available media types) included in the response.</dd>
  <dt>Representation Format:</dt>
  <dd style="margin-left: 8">A set of rules for serializing resource state. On the Web, the most prevalent representation format is HTML. Other common formats include plain text and formats based on JSON <a href="#RFC7159">[RFC7159]</a>, XML, or RDF. Within IoT systems, often compact formats based on JSON, CBOR <a href="#RFC7049">[RFC7049]</a>, and EXI <a href="#W3C.REC-exi-20110310">[W3C.REC-exi-20110310]</a> are used.</dd>
  <dt>Representation:</dt>
  <dd style="margin-left: 8">A serialization that represents the current or intended state of a resource and that can be transferred between clients and servers. REST requires representations to be self-describing, meaning that there must be metadata that allows peers to understand which representation format is used. Depending on the protocol needs and capabilities, there can be additional metadata that is transmitted along with the representation.</dd>
  <dt>Representational State Transfer (REST):</dt>
  <dd style="margin-left: 8">An architectural style for Internet-scale distributed hypermedia systems.</dd>
  <dt>Resource:</dt>
  <dd style="margin-left: 8">An item of interest identified by a URI. Anything that can be named can be a resource. A resource often encapsulates a piece of state in a system. Typical resources in an IoT system can be, e.g., a sensor, the current value of a sensor, the location of a device, or the current state of an actuator.</dd>
  <dt>Resource State:</dt>
  <dd style="margin-left: 8">A model of a resource&#8217;s possible states that is represented in a supported representation type, typically a media type. Resources can change state because of REST interactions with them, or they can change state for reasons outside of the REST model.</dd>
  <dt>Reverse Proxy:</dt>
  <dd style="margin-left: 8">An intermediary that appears as a server towards the client but satisfies the requests by forwarding them to the actual server (possibly via one or more other intermediaries). A reverse proxy is often used to encapsulate legacy services, to improve server performance through caching, and to enable load balancing across multiple machines.</dd>
  <dt>Safe Method:</dt>
  <dd style="margin-left: 8">A method that does not result in any state change on the origin server when applied to a resource. For example, the GET method only returns a representation of the resource state but does not change the resource. Thus, it is always safe for a client to retrieve a representation without affecting server-side state.</dd>
  <dt>Server:</dt>
  <dd style="margin-left: 8">A node that listens for requests, performs the requested operation and sends responses back to the clients.</dd>
  <dt>Uniform Resource Identifier (URI):</dt>
  <dd style="margin-left: 8">A global identifier for resources. See <a href="#sec-uris">Section 3.4</a> for more details.</dd>
</dl>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#basics" id="basics">Basics</a></h1>
<h1 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a> <a href="#architecture" id="architecture">Architecture</a></h1>
<p id="rfc.section.3.1.p.1">The components of a RESTful system are assigned one of two roles: client or server.  User agents are always in the client role and have the initiative to issue requests.  Intermediaries (such as forward proxies and reverse proxies) implement both roles, but only forward requests to other intermediaries or origin servers.  They can also translate requests to different protocols, for instance, as CoAP-HTTP cross-proxies.</p>
<p id="rfc.section.3.1.p.2">Note that the terms &#8220;client&#8221; and &#8220;server&#8221; refer only to the roles that the nodes assume for a particular message exchange. The same node might act as a client in some communications and a server in others.</p>
<div id="rfc.figure.1"/>
<div id="basic-arch-x"/>
<pre>
 ________                       _________
|        |                     |         |
| User  (C)-------------------(S) Origin |
| Agent  |                     |  Server |
|________|                     |_________|
(Browser)                      (Web Server)
</pre>
<p class="figure">Figure 1: Client-Server Communication</p>
<div id="rfc.figure.2"/>
<div id="basic-arch-a"/>
<pre>
 ________       __________                        _________
|        |     |          |                      |         |
| User  (C)---(S) Inter- (C)--------------------(S) Origin |
| Agent  |     |  mediary |                      |  Server |
|________|     |__________|                      |_________|
(Browser)     (Forward Proxy)                    (Web Server)
</pre>
<p class="figure">Figure 2: Communication with Forward Proxy</p>
<p id="rfc.section.3.1.p.3">Reverse proxies are usually imposed by the origin server.  In addition to the features of a forward proxy, they can also provide an interface for non-RESTful services such as legacy systems or alternative technologies such as Bluetooth ATT/GATT.  This property is enforced by the layered system constraint of REST, which says that a client cannot see beyond the server it is connected to.</p>
<div id="rfc.figure.3"/>
<div id="basic-arch-b"/>
<pre>
 ________                        __________       _________
|        |                      |          |     |         |
| User  (C)--------------------(S) Inter- (x)---(x) Origin |
| Agent  |                      |  mediary |     |  Server |
|________|                      |__________|     |_________|
(Browser)                     (Reverse Proxy)   (Legacy System)
</pre>
<p class="figure">Figure 3: Communication with Reverse Proxy</p>
<p id="rfc.section.3.1.p.4">Nodes in IoT systems often implement both roles.  Unlike intermediaries, however, they can take the initiative as a client (e.g., to register with a directory, such as CoRE Resource Directory <a href="#I-D.ietf-core-resource-directory">[I-D.ietf-core-resource-directory]</a>, or to interact with another thing) and act as origin server at the same time (e.g., to serve sensor values or provide an actuator interface).</p>
<div id="rfc.figure.4"/>
<div id="basic-arch-c"/>
<pre>
 ________                                         _________
|        |                                       |         |
| Thing (C)-------------------------------------(S) Origin |
|       (S)                                      |  Server |
|________| \                                     |_________|
 (Sensor)   \   ________                     (Resource Directory)
             \ |        |
              (C) Thing |
               |________|
              (Controller)
</pre>
<p class="figure">Figure 4: Constrained RESTful environments</p>
<h1 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a> <a href="#system-design" id="system-design">System design</a></h1>
<p id="rfc.section.3.2.p.1">When designing a RESTful system, the state of the distributed application must be assigned to the different components.  Here, it is important to distinguish between &#8220;session state&#8221; and &#8220;resource state&#8221;.</p>
<p id="rfc.section.3.2.p.2">Session state encompasses the control flow and the interactions between the components (see <a href="#sec-terms">Section 2</a>).  Following the statelessness constraint, the session state must be kept only on clients.  On the one hand, this makes requests a bit more verbose since every request must contain all the information necessary to process it.  On the other hand, this makes servers efficient, since they do not have to keep any state about their clients.  Requests can easily be distributed over multiple worker threads or server instances.  For the IoT systems, it lowers the memory requirements for server implementations, which is particularly important for constrained servers and servers serving large amount of clients.</p>
<p id="rfc.section.3.2.p.3">Resource state includes the more persistent data of an application (i.e., independent of the application control flow).  This can be static data such as device descriptions, persistent data such as system configuration, but also dynamic data such as the current value of a sensor on a thing.</p>
<h1 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3.</a> <a href="#resource-modeling" id="resource-modeling">Resource modeling</a></h1>
<p id="rfc.section.3.3.p.1">Important part of RESTful API design is to model the system as a set of resources whose state can be retrieved and/or modified and where resources can be potentially also created and/or deleted.</p>
<p id="rfc.section.3.3.p.2">Resource representations have a media type that tells how the representation should be interpreted. Typical media types for IoT systems include &#8220;text/plain&#8221; for simple UTF-8 text, &#8220;application/octet-stream&#8221; for arbitrary binary data, &#8220;application/json&#8221; for JSON <a href="#RFC7159">[RFC7159]</a>, &#8220;application/senml+json&#8221; <a href="#I-D.ietf-core-senml">[I-D.ietf-core-senml]</a> for Sensor Markup Language (SenML) formatted data, &#8220;application/cbor&#8221; for CBOR <a href="#RFC7049">[RFC7049]</a>, &#8220;application/exi&#8221; for EXI <a href="#W3C.REC-exi-20110310">[W3C.REC-exi-20110310]</a>. Full list of registered internet media types is available at the IANA registry <a href="#IANA-media-types">[IANA-media-types]</a> and media types registered for use with CoAP are listed at CoAP Content-Formats IANA registry <a href="#IANA-CoAP-media">[IANA-CoAP-media]</a>.</p>
<h1 id="rfc.section.3.4"><a href="#rfc.section.3.4">3.4.</a> <a href="#sec-uris" id="sec-uris">Uniform Resource Identifiers (URIs)</a></h1>
<p id="rfc.section.3.4.p.1">Uniform Resource Identifiers (URIs) are used to indicate a resource for interaction, to reference a resource from another resource, to advertise or bookmark a resource, or to index a resource by search engines.</p>
<pre>
  foo://example.com:8042/over/there?name=ferret#nose
  \_/   \______________/\_________/ \_________/ \__/
   |           |            |            |        |
scheme     authority       path        query   fragment
</pre>
<p id="rfc.section.3.4.p.2">A URI is a sequence of characters that matches the syntax defined in <a href="#RFC3986">[RFC3986]</a>. It consists of a hierarchical sequence of five components: scheme, authority, path, query, and fragment (from most significant to least significant). A scheme creates a namespace for resources and defines how the following components identify a resource within that namespace. The authority identifies an entity that governs part of the namespace, such as the server &#8220;www.example.org&#8221; in the &#8220;http&#8221; scheme. A host name (e.g., a fully qualified domain name) or an IP address, potentially followed by a transport layer port number, are usually used in the authority component for the &#8220;http&#8221; and &#8220;coap&#8221; schemes. The path and query contain data to identify a resource within the scope of the URI&#8217;s scheme and naming authority. The fragment allows to refer to some portion of the resource, such as a section in an HTML document.</p>
<p id="rfc.section.3.4.p.3">For RESTful IoT applications, typical schemes include &#8220;https&#8221;, &#8220;coaps&#8221;, &#8220;http&#8221;, and &#8220;coap&#8221;. These refer to HTTP and CoAP, with and without Transport Layer Security (TLS) <a href="#RFC5246">[RFC5246]</a>. (CoAP uses Datagram TLS (DTLS) <a href="#RFC6347">[RFC6347]</a>, the variant of TLS for UDP.) These four schemes also provide means for locating the resource; using the HTTP protocol for &#8220;http&#8221; and &#8220;https&#8221;, and with the CoAP protocol for &#8220;coap&#8221; and &#8220;coaps&#8221;. If the scheme is different for two URIs (e.g., &#8220;coap&#8221; vs. &#8220;coaps&#8221;), it is important to note that even if the rest of the URI is identical, these are two different resources, in two distinct namespaces.</p>
<p id="rfc.section.3.4.p.4">The query parameters can be used to parametrize the resource. For example, a GET request may use query parameters to request the server to send only certain kind data of the resource (i.e., filtering the response). Query parameters in PUT and POST requests do not have such established semantics and are not commonly used.  Whether the order of the query parameters matters in URIs is unspecified and they can be re-ordered e.g., by proxies. Therefore applications should not rely on their order; see Section 3.3 of <a href="#RFC6943">[RFC6943]</a> for more details.</p>
<h1 id="rfc.section.3.5"><a href="#rfc.section.3.5">3.5.</a> <a href="#sec-methods" id="sec-methods">HTTP/CoAP Methods</a></h1>
<p id="rfc.section.3.5.p.1">Section 4.3 of <a href="#RFC7231">[RFC7231]</a> defines the set of methods in HTTP; Section 5.8 of <a href="#RFC7252">[RFC7252]</a> defines the set of methods in CoAP.  The following lists the most relevant methods and gives a short explanation of their semantics.</p>
<h1 id="rfc.section.3.5.1"><a href="#rfc.section.3.5.1">3.5.1.</a> <a href="#get" id="get">GET</a></h1>
<p id="rfc.section.3.5.1.p.1">The GET method requests a current representation for the target resource. Only the origin server needs to know how each of its resource identifiers corresponds to an implementation and how each implementation manages to select and send a current representation of the target resource in a response to GET.</p>
<p id="rfc.section.3.5.1.p.2">A payload within a GET request message has no defined semantics.</p>
<p id="rfc.section.3.5.1.p.3">The GET method is safe and idempotent.</p>
<h1 id="rfc.section.3.5.2"><a href="#rfc.section.3.5.2">3.5.2.</a> <a href="#post" id="post">POST</a></h1>
<p id="rfc.section.3.5.2.p.1">The POST method requests that the target resource process the representation enclosed in the request according to the resource&#8217;s own specific semantics.</p>
<p id="rfc.section.3.5.2.p.2">If one or more resources has been created on the origin server as a result of successfully processing a POST request, the origin server sends a 201 (Created) response containing a Location header field that provides an identifier for the resource created and a representation that describes the status of the request while referring to the new resource(s).</p>
<p id="rfc.section.3.5.2.p.3">The POST method is not safe nor idempotent.</p>
<h1 id="rfc.section.3.5.3"><a href="#rfc.section.3.5.3">3.5.3.</a> <a href="#put" id="put">PUT</a></h1>
<p id="rfc.section.3.5.3.p.1">The PUT method requests that the state of the target resource be created or replaced with the state defined by the representation enclosed in the request message payload.  A successful PUT of a given representation would suggest that a subsequent GET on that same target resource will result in an equivalent representation being sent.</p>
<p id="rfc.section.3.5.3.p.2">The fundamental difference between the POST and PUT methods is highlighted by the different intent for the enclosed representation. The target resource in a POST request is intended to handle the enclosed representation according to the resource&#8217;s own semantics, whereas the enclosed representation in a PUT request is defined as replacing the state of the target resource.  Hence, the intent of PUT is idempotent and visible to intermediaries, even though the exact effect is only known by the origin server.</p>
<p id="rfc.section.3.5.3.p.3">The PUT method is not safe, but is idempotent.</p>
<h1 id="rfc.section.3.5.4"><a href="#rfc.section.3.5.4">3.5.4.</a> <a href="#delete" id="delete">DELETE</a></h1>
<p id="rfc.section.3.5.4.p.1">The DELETE method requests that the origin server remove the association between the target resource and its current functionality.</p>
<p id="rfc.section.3.5.4.p.2">If the target resource has one or more current representations, they might or might not be destroyed by the origin server, and the associated storage might or might not be reclaimed, depending entirely on the nature of the resource and its implementation by the origin server.</p>
<p id="rfc.section.3.5.4.p.3">The DELETE method is not safe, but is idempotent.</p>
<h1 id="rfc.section.3.6"><a href="#rfc.section.3.6">3.6.</a> <a href="#httpcoap-statusresponse-codes" id="httpcoap-statusresponse-codes">HTTP/CoAP Status/Response Codes</a></h1>
<p id="rfc.section.3.6.p.1">Section 6 of <a href="#RFC7231">[RFC7231]</a> defines a set of Status Codes in HTTP that are used by application to indicate whether a request was understood and satisfied, and how to interpret the answer.  Similarly, Section 5.9 of <a href="#RFC7252">[RFC7252]</a> defines the set of Response Codes in CoAP.</p>
<p id="rfc.section.3.6.p.2">The status codes consist of three digits (e.g., &#8220;404&#8221; with HTTP or &#8220;4.04&#8221; with CoAP) where the first digit expresses the class of the code. Implementations do not need to understand all status codes, but the class of the code must be understood. Codes starting with 1 are informational; the request was received and being processed. Codes starting with 2 indicate successful request. Codes starting with 3 indicate redirection; further action is needed to complete the request. Codes stating with 4 and 5 indicate errors. The codes starting with 4 mean client error (e.g., bad syntax in request) whereas codes starting with 5 mean server error; there was no apparent problem with the request but server was not able to fulfill the request.</p>
<p id="rfc.section.3.6.p.3">Responses may be stored in a cache to satisfy future, equivalent requests. HTTP and CoAP use two different patterns to decide what responses are cacheable. In HTTP, the cacheability of a response depends on the request method (e.g., responses returned in reply to a GET request are cacheable). In CoAP, the cacheability of a response depends on the response code (e.g., responses with code 2.04 are cacheable). This difference also leads to slightly different semantics for the codes starting with 2; for example, CoAP does not have a 2.00 response code whereas 200 (&#8220;OK&#8221;) is commonly used with HTTP.</p>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#sec-sec" id="sec-sec">Security Considerations</a></h1>
<p id="rfc.section.4.p.1">This document does not define new functionality and therefore does not introduce new security concerns. However, security consideration from related specifications apply to RESTful IoT design. These include:</p>
<p/>

<ul>
  <li>HTTP security: Section 9 of <a href="#RFC7230">[RFC7230]</a>, Section 9 of <a href="#RFC7231">[RFC7231]</a>, etc.</li>
  <li>CoAP security: Section 11 of <a href="#RFC7252">[RFC7252]</a></li>
  <li>URI security: Section 7 of <a href="#RFC3986">[RFC3986]</a></li>
</ul>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#acknowledgement" id="acknowledgement">Acknowledgement</a></h1>
<p id="rfc.section.5.p.1">The authors would like to thank Mert Ocak, Heidi-Maria Back, Tero Kauppinen, Michael Koster, Robby Simpson, Ravi Subramaniam, Dave Thaler, and Erik Wilde for the reviews and feedback.</p>
<h1 id="rfc.references"><a href="#rfc.references">6.</a> References</h1>
<h1 id="rfc.references.1"><a href="#rfc.references.1">6.1.</a> Normative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-core-resource-directory">[I-D.ietf-core-resource-directory]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, <a>Koster, M.</a>, <a>Bormann, C.</a> and <a>P. Stok</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-resource-directory-08">CoRE Resource Directory</a>", Internet-Draft draft-ietf-core-resource-directory-08, July 2016.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="REST">[REST]</b>
      </td>
      <td class="top"><a>Fielding, R.</a>, "<a>Architectural Styles and the Design of Network-based Software Architectures</a>", Ph.D. Dissertation, University of California, Irvine , 2000.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3986">[RFC3986]</b>
      </td>
      <td class="top"><a>Berners-Lee, T.</a>, <a>Fielding, R.</a> and <a>L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, DOI 10.17487/RFC3986, January 2005.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5246">[RFC5246]</b>
      </td>
      <td class="top"><a>Dierks, T.</a> and <a>E. Rescorla</a>, "<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>", RFC 5246, DOI 10.17487/RFC5246, August 2008.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6347">[RFC6347]</b>
      </td>
      <td class="top"><a>Rescorla, E.</a> and <a>N. Modadugu</a>, "<a href="http://tools.ietf.org/html/rfc6347">Datagram Transport Layer Security Version 1.2</a>", RFC 6347, DOI 10.17487/RFC6347, January 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7049">[RFC7049]</b>
      </td>
      <td class="top"><a>Bormann, C.</a> and <a>P. Hoffman</a>, "<a href="http://tools.ietf.org/html/rfc7049">Concise Binary Object Representation (CBOR)</a>", RFC 7049, DOI 10.17487/RFC7049, October 2013.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7230">[RFC7230]</b>
      </td>
      <td class="top"><a>Fielding, R.</a> and <a>J. Reschke</a>, "<a href="http://tools.ietf.org/html/rfc7230">Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing</a>", RFC 7230, DOI 10.17487/RFC7230, June 2014.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7231">[RFC7231]</b>
      </td>
      <td class="top"><a>Fielding, R.</a> and <a>J. Reschke</a>, "<a href="http://tools.ietf.org/html/rfc7231">Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content</a>", RFC 7231, DOI 10.17487/RFC7231, June 2014.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="W3C.REC-exi-20110310">[W3C.REC-exi-20110310]</b>
      </td>
      <td class="top"><a>Schneider, J.</a> and <a>T. Kamiya</a>, "<a href="http://www.w3.org/TR/2011/REC-exi-20110310">Efficient XML Interchange (EXI) Format 1.0</a>", World Wide Web Consortium Recommendation REC-exi-20110310, March 2011.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.references.2"><a href="#rfc.references.2">6.2.</a> Informative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-core-senml">[I-D.ietf-core-senml]</b>
      </td>
      <td class="top"><a>Jennings, C.</a>, <a>Shelby, Z.</a>, <a>Arkko, J.</a>, <a>Keranen, A.</a> and <a>C. Bormann</a>, <a href="http://tools.ietf.org/html/draft-ietf-core-senml-02">Media Types for Sensor Markup Language (SenML)</a>", Internet-Draft draft-ietf-core-senml-02, July 2016.</td>
    </tr>
    <tr><td class="reference"><b id="IANA-CoAP-media">[IANA-CoAP-media]</b></td><td class="top"><a href="http://www.iana.org/assignments/core-parameters/core-parameters.xhtml#content-formats">CoAP Content-Formats</a>", n.d..</td>, "</tr>
    <tr><td class="reference"><b id="IANA-media-types">[IANA-media-types]</b></td><td class="top"><a href="http://www.iana.org/assignments/media-types/media-types.xhtml">Media Types</a>", n.d..</td>, "</tr>
    <tr>
      <td class="reference">
        <b id="RFC6943">[RFC6943]</b>
      </td>
      <td class="top"><a>Thaler, D.</a>, "<a href="http://tools.ietf.org/html/rfc6943">Issues in Identifier Comparison for Security Purposes</a>", RFC 6943, DOI 10.17487/RFC6943, May 2013.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7159">[RFC7159]</b>
      </td>
      <td class="top"><a>Bray, T.</a>, "<a href="http://tools.ietf.org/html/rfc7159">The JavaScript Object Notation (JSON) Data Interchange Format</a>", RFC 7159, DOI 10.17487/RFC7159, March 2014.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7228">[RFC7228]</b>
      </td>
      <td class="top"><a>Bormann, C.</a>, <a>Ersue, M.</a> and <a>A. Keranen</a>, "<a href="http://tools.ietf.org/html/rfc7228">Terminology for Constrained-Node Networks</a>", RFC 7228, DOI 10.17487/RFC7228, May 2014.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7252">[RFC7252]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, <a>Hartke, K.</a> and <a>C. Bormann</a>, "<a href="http://tools.ietf.org/html/rfc7252">The Constrained Application Protocol (CoAP)</a>", RFC 7252, DOI 10.17487/RFC7252, June 2014.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.appendix.A"><a href="#rfc.appendix.A">Appendix A.</a> <a href="#future-work" id="future-work">Future Work</a></h1>
<p/>

<ul>
  <li>More details on the definition of application state. Is server involved and to what extent.</li>
  <li>Discuss design patterns, such as &#8220;Observing state (asynchronous updates) of a resource&#8221;, &#8220;Executing a Function&#8221;, &#8220;Events as State&#8221;, &#8220;Conversion&#8221;, &#8220;Collections&#8221;, &#8220;robust communication in network with high packet loss&#8221;, &#8220;unreliable (best effort) communication&#8221;, &#8220;3-way commit&#8221;, etc.</li>
  <li>Discuss directories, such as CoAP Resource Directory</li>
  <li>More information on how to design resources; choosing what is modeled as a resource, etc.</li>
</ul>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Authors' Addresses</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ari Keranen</span> 
	  <span class="n hidden">
		<span class="family-name">Keranen</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">Jorvas</span>,  
		<span class="region"></span>
		<span class="code">02420</span>
	  </span>
	  <span class="country-name vcardline">Finland</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ari.keranen@ericsson.com">ari.keranen@ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Matthias Kovatsch</span> 
	  <span class="n hidden">
		<span class="family-name">Kovatsch</span>
	  </span>
	</span>
	<span class="org vcardline">ETH Zurich</span>
	<span class="adr">
	  <span class="vcardline">Universitaetstrasse 6</span>

	  <span class="vcardline">
		<span class="locality">Zurich</span>,  
		<span class="region"></span>
		<span class="code">CH-8092</span>
	  </span>
	  <span class="country-name vcardline">Switzerland</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:kovatsch@inf.ethz.ch">kovatsch@inf.ethz.ch</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Klaus Hartke</span> 
	  <span class="n hidden">
		<span class="family-name">Hartke</span>
	  </span>
	</span>
	<span class="org vcardline">Universitaet Bremen TZI</span>
	<span class="adr">
	  <span class="vcardline">Postfach 330440</span>

	  <span class="vcardline">
		<span class="locality">Bremen</span>,  
		<span class="region"></span>
		<span class="code">D-28359</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:hartke@tzi.org">hartke@tzi.org</a></span>

  </address>
</div>

</body>
</html>
